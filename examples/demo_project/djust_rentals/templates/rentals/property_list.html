{% extends "rentals/base.html" %}

{% block title %}Properties - Rental Management{% endblock %}

{% block content %}
<div class="py-6" data-liveview-root data-live-view="djust_rentals.views.properties.PropertyListView">
  <div class="container mx-auto px-4 max-w-7xl">
    <!-- Page Header with Lucide Icon and Add Button -->
    {{ page_header|safe }}

    <!-- Search and Filters -->
    <div class="bg-card border border-border rounded-lg p-6 mb-6">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <!-- Search -->
        <div class="md:col-span-2">
          <label class="block text-sm font-medium text-muted-foreground mb-2">
            <div class="flex items-center gap-1">
              <i data-lucide="search" class="w-4 h-4"></i>
              Search Properties
            </div>
          </label>
          <input type="text"
                 dj-input="search"
                 value="{{ search_query }}"
                 placeholder="Search by name, address, or city..."
                 class="w-full px-3 py-2 bg-background border border-input rounded-md text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent">
        </div>

        <!-- Status Filter -->
        <div>
          <label class="block text-sm font-medium text-muted-foreground mb-2">
            <div class="flex items-center gap-1">
              <i data-lucide="filter" class="w-4 h-4"></i>
              Status
            </div>
          </label>
          <select dj-change="filter_by_status"
                  class="w-full px-3 py-2 bg-background border border-input rounded-md text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent">
            <option value="all" {% if filter_status == 'all' %}selected{% endif %}>All Statuses</option>
            {% for choice in status_choices %}
            <option value="{{ choice.0 }}" {% if filter_status == choice.0 %}selected{% endif %}>{{ choice.1 }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Type Filter -->
        <div>
          <label class="block text-sm font-medium text-muted-foreground mb-2">
            <div class="flex items-center gap-1">
              <i data-lucide="building" class="w-4 h-4"></i>
              Property Type
            </div>
          </label>
          <select dj-change="filter_by_type"
                  class="w-full px-3 py-2 bg-background border border-input rounded-md text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent">
            <option value="all" {% if filter_type == 'all' %}selected{% endif %}>All Types</option>
            {% for choice in property_types %}
            <option value="{{ choice.0 }}" {% if filter_type == choice.0 %}selected{% endif %}>{{ choice.1 }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
    </div>

    <!-- Summary Stats - Using StatCard Components -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
      {% for stat_card in stat_cards %}
        {{ stat_card|safe }}
      {% endfor %}
    </div>

    <!-- Properties Table - Using DataTable Component -->
    {{ property_table|safe }}
  </div>
</div>
{% endblock %}
