{% extends 'base.html' %}

{% block title %}Auto Form (Bootstrap) - djust{% endblock %}

{% block nav_forms_active %}active{% endblock %}

{% block content %}
{% load live_tags %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-6 mx-auto">
            <h2>Contact Form - Auto Rendering</h2>
            <p class="text-muted">Using {% templatetag openvariable %} live_form view {% templatetag closevariable %} template tag</p>

            {% if success_message %}
            <div class="alert alert-success">
                {{ success_message }}
                <button type="button" class="btn-close float-end" dj-click="clear_message"></button>
            </div>
            {% endif %}

            {% if error_message %}
            <div class="alert alert-danger">
                {{ error_message }}
                <button type="button" class="btn-close float-end" dj-click="clear_message"></button>
            </div>
            {% endif %}

            <form dj-submit="submit_form" onsubmit="return false;">
                {% csrf_token %}

                <!-- Auto-rendered form using as_live() method -->
                {{ auto_form_html }}

                <div class="d-grid gap-2 mt-3">
                    <button type="submit" class="btn btn-primary">Send Message</button>
                    <button type="button" class="btn btn-secondary" dj-click="reset_form">Reset</button>
                </div>
            </form>

            <div class="mt-4">
                <h5>How it works:</h5>
                <ul class="small text-muted">
                    <li>Single template tag renders entire form</li>
                    <li>Automatic framework-specific styling (Bootstrap 5)</li>
                    <li>Real-time validation with @change events</li>
                    <li>Labels, help text, and errors included</li>
                    <li>No manual field-by-field rendering needed!</li>
                </ul>

                <h5>Template Code:</h5>
                <pre class="bg-light p-3 small"><code>{% templatetag openblock %} load live_tags {% templatetag closeblock %}
&lt;form dj-submit="submit_form"&gt;
    {% templatetag openblock %} csrf_token {% templatetag closeblock %}
    {% templatetag openvariable %} live_form view {% templatetag closevariable %}
    &lt;button type="submit"&gt;Submit&lt;/button&gt;
&lt;/form&gt;</code></pre>
            </div>
        </div>
    </div>
</div>
{% endblock %}
