{#
JavaScript Hooks Example Template

This template demonstrates:
- dj-hook: Connect elements to JavaScript hooks
- Passing data to hooks via data-* attributes
- Hook lifecycle: mounted(), updated(), destroyed()

Hooks are perfect for:
- Chart libraries (Chart.js, D3)
- Maps (Leaflet, Google Maps)
- Rich text editors
- Animations
- Any client-side widget that needs initialization
#}

<div class="hooks-container">
    <h1>JavaScript Hooks</h1>
    <p class="subtitle">Client-side interactivity with server state</p>
    
    {#
    dj-hook="ChartHook" connects this element to the ChartHook JavaScript hook.
    
    When this element:
    - Mounts: ChartHook.mounted(el) is called
    - Updates: ChartHook.updated(el) is called 
    - Unmounts: ChartHook.destroyed(el) is called
    
    Data attributes pass server state to the hook.
    #}
    <div 
        id="chart" 
        class="chart-container"
        dj-hook="ChartHook"
        data-values="{{ chart_data|safe }}"
        data-type="{{ chart_type }}"
        data-animate="{{ animate|yesno:'true,false' }}"
    >
        {# Chart renders here via JavaScript #}
        <div class="chart-placeholder">
            Loading chart...
        </div>
    </div>
    
    <div class="controls">
        <button dj-click="update_data" class="btn btn-primary">
            ðŸŽ² Randomize Data
        </button>
        
        <button dj-click="toggle_chart_type" class="btn btn-secondary">
            ðŸ“Š Toggle {{ chart_type|title }} â†’ {% if chart_type == 'bar' %}Line{% else %}Bar{% endif %}
        </button>
    </div>
    
    <div class="data-display">
        <h3>Current Data</h3>
        <code>{{ chart_data }}</code>
        <p>Chart Type: <strong>{{ chart_type }}</strong></p>
    </div>
    
    {# 
    Another hook example: AnimatedCounter
    Animates number changes smoothly on the client side.
    #}
    <div class="animated-counter-section">
        <h3>Animated Counter Hook</h3>
        <div 
            class="animated-counter"
            dj-hook="AnimatedCounter"
            data-value="{{ chart_data.0 }}"
            data-duration="500"
        >
            {{ chart_data.0 }}
        </div>
        <p class="hint">Updates smoothly when data changes</p>
    </div>
</div>

<style>
    .hooks-container {
        max-width: 600px;
        margin: 2rem auto;
        padding: 2rem;
        font-family: system-ui, -apple-system, sans-serif;
    }
    
    .subtitle {
        color: #666;
        margin-bottom: 2rem;
    }
    
    .chart-container {
        background: #f9f9f9;
        border-radius: 8px;
        padding: 2rem;
        min-height: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .chart-placeholder {
        color: #999;
    }
    
    .controls {
        display: flex;
        gap: 1rem;
        margin-top: 1.5rem;
        justify-content: center;
    }
    
    .btn {
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        border: 2px solid #333;
        border-radius: 6px;
        cursor: pointer;
    }
    
    .btn-primary {
        background: #333;
        color: white;
    }
    
    .btn-secondary {
        background: white;
        color: #333;
    }
    
    .data-display {
        margin-top: 2rem;
        padding: 1rem;
        background: #f5f5f5;
        border-radius: 6px;
    }
    
    .data-display code {
        background: #e0e0e0;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
    }
    
    .animated-counter-section {
        margin-top: 2rem;
        padding: 1.5rem;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 8px;
        text-align: center;
        color: white;
    }
    
    .animated-counter-section h3 {
        margin-top: 0;
    }
    
    .animated-counter {
        font-size: 3rem;
        font-weight: bold;
    }
    
    .hint {
        font-size: 0.875rem;
        opacity: 0.8;
        margin-bottom: 0;
    }
</style>
